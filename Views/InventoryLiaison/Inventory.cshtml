@model IEnumerable<FridgeSystem.Models.ViewModels.FridgeInventoryViewModel>

<div class="form-container">
    <h1 class="dashboard-title">Fridge Inventory</h1>

    <!-- Search form -->
    <form asp-action="Inventory" method="get" class="mb-3 d-flex gap-2 flex-wrap">
        <input type="text" name="searchModel" class="form-input" placeholder="Search by model..." value="@ViewBag.SearchModel" />
        <input type="text" name="searchCategory" class="form-input" placeholder="Search by category..." value="@ViewBag.SearchCategory" />
        <input type="date" name="dateFrom" class="form-input" value="@ViewBag.DateFrom" />
        <input type="date" name="dateTo" class="form-input" value="@ViewBag.DateTo" />
        <select name="warehouseId" class="form-input">
            <option value="">All Warehouses</option>
            @foreach (var wh in ViewBag.Warehouses as List<SelectListItem> ?? new List<SelectListItem>())
            {
                <option value="@wh.Value" selected="@(ViewBag.SelectedWarehouseId?.ToString() == wh.Value ? "selected" : null)">
                    @wh.Text
                </option>
            }
        </select>
        <button type="submit" class="form-button">Search</button>
    </form>

    <!-- Action buttons -->
    <div class="mb-3 d-flex gap-2 flex-wrap">
        <a asp-action="AddFridge" class="btn-action btn-full">Add New Fridge Model</a>
        <a asp-controller="InventoryLiaison" asp-action="Dashboard" class="btn-secondary">Back to Dashboard</a>
    </div>

    <!-- Inventory table -->
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Model</th>
                <th>Category</th>
                <th>Quantity In Stock</th>
                <th>Supplier</th>
                <th>Warehouse</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Any())
            {
                foreach (var fridge in Model)
                {
                    <tr>
                        <td>@fridge.FridgeModel</td>
                        <td>@fridge.FridgeCategory</td>
                        <td>@fridge.QuantityInStock</td>
                        <td>@fridge.SupplierName</td> <!-- display supplier name -->
                        <td>@fridge.WarehousesNames</td> <!-- display all linked warehouse names -->
                        <td>
                            <a asp-action="EditFridge" asp-route-inventoryId="@fridge.InventoryId" class="btn btn-sm btn-primary">Edit</a>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="6" class="text-center">No fridges found.</td>
                </tr>
            }
        </tbody>
    </table>
</div>

