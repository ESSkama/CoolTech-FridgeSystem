@model FridgeSystem.Models.Fridge

@{
    ViewData["Title"] = Model.Model;
}

<div class="container mt-5">
    <div class="row">
        <!-- Left Column: Image and Thumbnails -->
        <div class="col-md-6">
            <div class="main-image-container mb-3 shadow-sm rounded">
                <img src="@Model.FridgeImage" class="img-fluid product-detail-main-img" alt="@Model.Model">
            </div>
            <div class="d-flex justify-content-start gap-2 thumbnail-gallery">
                @* You might add more image URLs to your Fridge model or a separate Images model for multiple thumbnails *@
                @*@<img src="@Model.FridgeImageURL" class="img-thumbnail selected-thumbnail" alt="Thumbnail 1">
                @* Example for additional thumbnails if you had more FridgeImageURL properties or a collection *@
                @* <img src="/path/to/second_image.png" class="img-thumbnail" alt="Thumbnail 2"> *@
                @* <img src="/path/to/third_image.png" class="img-thumbnail" alt="Thumbnail 3"> *@
            </div>
        </div>
         <!-- Right Column: Product Details and Actions -->
        <div class="col-md-6">
            <h1 class="mb-2">@Model.Model</h1>

            @* Shipping Message *@
            <p class="mb-3 text-muted">Ships in 5-7 working days. Nationwide Shipping Available.</p>


<!-- Quantity Selector & Add to Cart (for Quote Request) -->
            <div class="d-flex align-items-center mb-4">
                <input type="number" id="quantityInput" class="form-control me-2" value="1" min="1" max="@Model.StockQuantity" style="width: 80px;">
                @if (Model.StockQuantity > 0)
                {
                    <button class="btn btn-primary btn-lg me-2 add-to-cart-btn" data-fridge-id="@Model.FridgeId">
                        <i class="bi bi-cart-plus"></i> Add to Cart
                    </button>
                }
                else
                {
                    <button class="btn btn-secondary btn-lg me-2" disabled>Out of Stock</button>
                }
            </div>
 <h5 class="mt-4 border-bottom pb-2">Product Overview</h5>
            @* Display specifications as a list *@
            @if (!string.IsNullOrWhiteSpace(Model.Specification))
            {
                <ul>
                    @foreach (var specLine in Model.Specification.Split(new[] { "\r\n", "\r", "\n" }, StringSplitOptions.RemoveEmptyEntries))
                    {
                        <li>@specLine</li>
                    }
                </ul>
            }
            else
            {
                <p>No detailed specifications available.</p>
            }
  <div class="d-flex align-items-center mb-3">
                <span class="fw-bold me-2">SKU:</span>
                <span>@(Model.SerialNumber ?? "N/A")</span> @* Use null-coalescing for nullable SerialNumber *@
            </div>

            <div class="d-flex align-items-center mb-3">
                <span class="fw-bold me-2">Category:</span>
                <span>
                    @(Model.Category.ToString()
                      .Replace("Door", " Door")
                      .Replace("BySide", " By Side")
                      .Replace("Cooler", " Cooler"))
                </span>
                @if (Model.Supplier != null && !string.IsNullOrWhiteSpace(Model.Supplier.SupplierName))
                {
                    <span class="ms-3 fw-bold me-2">Brand:</span>
                    <span>@Model.Supplier.SupplierName</span>
                }
            </div>
             @* Display IsAvailable if you want users to see it, otherwise omit *@
            @*if (Model.IsAvailable.HasValue && Model.IsAvailable.Value == false)
            {
                <p class="text-danger fw-bold">Currently not available for order.</p>
            }*@

<a asp-action="Index" class="btn btn-link mt-3"><i class="bi bi-arrow-left me-2"></i>Back to Products</a>
        </div>
    </div>
<ul class="nav nav-tabs mt-5" id="productDetailTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab" aria-controls="description" aria-selected="true">Description</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="additional-info-tab" data-bs-toggle="tab" data-bs-target="#additional-info" type="button" role="tab" aria-controls="additional-info" aria-selected="false">Additional Information</button>
                </li>
            </ul>

<div class="tab-content border border-top-0 p-3 mb-5" id="productDetailTabsContent">
                <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                    @* Content for Description Tab *@
                     <p>This @Model.Model features a sleek @Model.FridgeColor finish and is designed for optimal performance and energy efficiency. Perfect for commercial use or large home settings. Experience superior cooling and reliable operation.</p>
                     <p>Each unit undergoes rigorous quality control checks and comes with a comprehensive manufacturer's warranty.</p>
                </div>


<div class="tab-pane fade" id="additional-info" role="tabpanel" aria-labelledby="additional-info-tab">
    <table class="table table-striped table-bordered">
        <tbody>
            <tr>
                <th scope="row">Model</th>
                <td>@Model.Model</td>
            </tr>
            <tr>
                <th scope="row">SKU (Serial Number)</th> @* CORRECTED LINE HERE *@
                <td>@(Model.SerialNumber ?? "N/A")</td>
            </tr>
            <tr>
                <th scope="row">Color</th>
                <td>@Model.FridgeColor</td>
            </tr>
            <tr>
                <th scope="row">Category</th>
                <td>
                    @(Model.Category.ToString()
                      .Replace("Door", " Door")
                      .Replace("BySide", " By Side")
                      .Replace("Cooler", " Cooler"))
                </td>
            </tr>
            <tr>
                <th scope="row">Stock Quantity</th>
                <td>@Model.StockQuantity</td>
            </tr>
            @if (Model.WarrantyExpiryDate.HasValue)
            {
                <tr>
                    <th scope="row">Estimated Warranty</th>
                    <td>@Model.WarrantyExpiryDate.Value.ToShortDateString()</td>
                </tr>
            }
            @if (Model.DeliveryDate.HasValue)
            {
                <tr>
                    <th scope="row">Estimated Delivery (Internal)</th>
                    <td>@Model.DeliveryDate.Value.ToShortDateString()</td>
                </tr>
            }
            @if (Model.Supplier != null && !string.IsNullOrWhiteSpace(Model.Supplier.SupplierName))
            {
                <tr>
                    <th scope="row">Brand / Manufacturer</th>
                    <td>@Model.Supplier.SupplierName</td>
                    @* This closing </tr> should be outside the @if block if it always applies to the row.
                       However, since you're closing the <td> inside the @if, it implies the </tr>
                       should also be inside, making a complete row.
                       If the </tr> and subsequent tags were failing, this might be the culprit.
                       Let's make sure the </tr> is correctly nested:
                    *@
                </tr>
            }
        </tbody>
    </table>
</div>